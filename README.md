# StoryBuddy - Interactive Storybook App for Children

This beautiful webapp for children helps create illustrations and stories using either random popular templates or specific keywords input by the user. Built with Next.js (using App Router), React 19, and Tailwind CSS 4.

## Features

- **Kid-Friendly Interface**: Colorful, intuitive design that's easy for children to navigate
- **Enhanced Two-Phase Flow**: 
  - Phase 1: User Settings landing page with beautiful hero section and intuitive personalization controls
  - Phase 2: Mode Selection page with visually stunning template/custom story options
  - Seamless sliding transitions between phases for a cohesive experience
- **Persistent Settings**: User preferences saved to localStorage to remember choices between sessions
- **Personalization**: Customize story experiences with age range, gender preferences, and character personality traits 
- **Smooth UI Transitions**: Beautiful sliding animations when navigating between sections for an engaging user experience
- **Story Customization**: Easily customize your generated stories:
  - Story length (short/medium/long)
  - Reading level (easy/moderate/advanced)
- **AI-Powered Story Generation**: Create unique stories from popular templates using OpenAI GPT-4
- **Custom Stories**: Generate personalized stories based on keywords provided by the user
- **AI Illustrations**: Beautiful, child-friendly illustrations generated by DALL-E 3
- **Interactive Experience**: Watch as stories and illustrations are generated in real-time
- **Template Library**: Choose from various story themes like Adventure, Fantasy, Space, and more
- **Keyword Suggestions**: Get inspiration for story creation with suggested keywords
- **Immersive Reading**: Book-like experience with page-turning animations for maximum immersion
- **Story Saving**: Save favorite stories to read again later
- **My Stories Collection**: Browse, search, and organize your saved stories

## Technology Stack

- **Framework**: Next.js 15.2.1 (App Router)
- **Frontend**: React 19, TypeScript
- **Styling**: Tailwind CSS 4
- **Animation**: Smooth sliding transitions and fading animations for UI elements, React PageFlip for book animations
- **AI Integration**: OpenAI API for story generation and DALL-E for illustrations
- **Storage**: LocalStorage for story saving (prepared for Supabase integration)
- **API Routes**: Server-side API endpoints for secure AI integration
- **Linting**: ESLint 9

## Getting Started

First, run the development server:

```bash
npm run dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the app.

## Project Structure

```
/app                     # App Router directory
  /components            # Reusable components
    /Navigation.tsx      # Main navigation component
    /ImmersiveReader.tsx # Book-like reading experience
  /api                   # API routes for AI integration
    /generate-story      # OpenAI GPT-4 story generation endpoint
    /generate-image      # DALL-E 3 image generation endpoint
  /stories               # Story features
    /templates           # Template-based story generation
    /create              # Keyword-based story creation
    /generate            # Template story generation process
    /display             # Custom story display with illustrations
    /my-stories          # Collection of saved stories
  /types                 # TypeScript type definitions
    /story.ts            # Story-related types
    /index.ts            # Central export for types
  /utils                 # Utility functions
    /api.ts              # API client functions (legacy)
    /storage.ts          # Story storage and retrieval (legacy)
    /prompts/            # Prompt generation utilities
      /storyPrompts.ts   # Story prompt generators
      /imagePrompts.ts   # Image prompt enhancers
    /templates/          # Template management
      /templateData.ts   # Template definitions
      /templateUtils.ts  # Helper functions
  /services              # Service layer
    /storyService.ts     # Story generation service
    /imageService.ts     # Image generation service
    /storageService.ts   # Local storage service
  /page.tsx              # Homepage with personalization
/public                  # Static assets
```

## Code Organization

The codebase has been modularized for better maintainability:

1. **Types Module** - Central place for type definitions:
   - `StoryData`, `StoryTheme`, `StoryMode`, etc.
   - Improves type safety across the application

2. **Prompts Module** - Handles AI prompt generation:
   - Parameterized story prompt generation
   - Image prompt enhancement
   - System prompts for consistent AI outputs

3. **Templates Module** - Manages story templates:
   - Template definitions and metadata
   - Theme mapping for UI consistency
   - Helper functions for template operations

4. **Services Layer** - Business logic encapsulation:
   - Story generation services
   - Image generation with fallbacks
   - Local storage operations

## Design Principles

- **Accessibility**: Making the app accessible to all children
- **Child Safety**: Ensuring all content is appropriate for children
- **Personalization**: Adapting content to child's age, preferences and interests
- **Simplicity**: Keeping the interface simple and intuitive
- **Responsiveness**: Works well on tablets and desktop devices
- **Performance**: Fast loading and smooth interactions

## Development Guidelines

- Always use the App Router (not Pages Router)
- Keep components small and focused on a single responsibility
- Use TypeScript types/interfaces for all components and functions
- Follow accessibility best practices
- Add helpful comments to explain complex logic
- Use Tailwind utility classes for styling
- Handle client-side features with "use client" directive

## Personalization

StoryBuddy implements a comprehensive personalization system:

- **Age Range Settings**: Content is tailored to specific developmental stages (3-5, 6-8, 9-12, teenager)
- **Character Customization**: Gender preferences (boy, girl) for story protagonists
- **Personality Traits**: Character personalities that match the child's interests and values
- **Theme Preferences**: UI themes and color schemes to match individual preferences
- **Reading Preferences**: Font size options and reading mode preferences (standard or immersive)

## Last Updated

- Modularized codebase for improved maintainability - 03/15/2025
- Added service layer for better business logic organization - 03/15/2025
- Enhanced prompt system for more flexible story generation - 03/15/2025
- Added centralized type definitions - 03/15/2025
- Added customization options for story length and reading level - 03/15/2025
- Enhanced error handling for story generation and image creation - 03/15/2025
- Redesigned user flow with visually stunning hero section and dedicated Mode Selection page - 03/15/2025
- Added persistent state storage to remember user preferences - 03/15/2025
- Added sliding animation for seamless transition between user settings and mode selection - 03/15/2025
- Added personalization features with dynamic themes and character settings - 03/15/2025
- Added immersive reading experience with book-like page turning - 03/15/2025
- Implemented story saving and My Stories collection - 03/15/2025
- Created project with Next.js, React 19, and Tailwind CSS 4 - 03/15/2025
- Added OpenAI integration for story generation with GPT-4 - 03/15/2025
- Added DALL-E 3 integration for illustration generation - 03/15/2025
- Implemented interactive story creation flow with real-time AI generation - 03/15/2025
